# Feasibility Memo
## 一問一答フォーム作成・分析ツール

---

## 1. 本書の目的

本メモは、Google Apps Script（GAS）および
Google Workspace上で本プロジェクトを実装する際の

- 技術的実現可能性
- 制約条件
- 想定リスク
- 実装方針

を整理するものである。

---

# 2. 技術基盤

- 実装環境：Google Apps Script
- データストア：Google Spreadsheet
- 出題媒体：Google Form
- 実行トリガー：onFormSubmit
- ソース管理：GitHub（clasp利用想定）

---

# 3. フォーム自動生成の実現性

## 3.1 実現可否

GASのFormAppを利用することで
Googleフォームの自動生成は可能。

以下が実装可能：

- フォーム新規作成
- 設問追加（MultipleChoiceItem）
- 正解設定（setCorrectAnswer）
- 回答先スプレッドシート指定

---

## 3.2 制約

- UIデザインの自由度は限定的
- 問題数が多い場合フォーム生成に時間がかかる
- フォーム構造変更時は既存回答との整合性に注意

---

# 4. 回答データ取得

## 4.1 方法

フォーム回答は
- 回答スプレッドシート
- onFormSubmitトリガー

により取得可能。

---

## 4.2 注意点

- フォーム回答シートの列順は変更され得る
- 設問タイトルをキーに処理すると破綻する可能性あり
- questionIdを内部的に保持する設計が望ましい

---

# 5. 採点処理の実現性

## 5.1 実装方式

onFormSubmitトリガー内で：

1. 回答取得
2. 正誤判定
3. 得点計算
4. AttemptAnswers保存

を実行可能。

---

## 5.2 処理時間制約

- GASの実行時間制限（通常6分）
- 大量同時提出時の衝突可能性

対策：
- 採点は軽量ロジックに限定
- 集計処理はバッチ化も検討

---

# 6. データ構造の実現性

## 6.1 スプレッドシートをDBとして利用

可能だが以下に注意：

- 主キー管理は自前実装（UUID推奨）
- JOIN的処理は自前ロジック必要
- 行検索はパフォーマンスに注意

---

## 6.2 想定規模

MVP想定：

- 1クラス 30名
- 1テスト 10問
- 月4回実施

→ 年間 30 × 10 × 48 ≒ 14,400レコード規模

スプレッドシートで十分対応可能。

---

# 7. 生徒識別方式の検討

## 選択肢

### ① Googleログイン利用
- 正確
- 同一ドメイン前提

### ② 学生ID入力
- 柔軟
- 入力ミス対策必要

### ③ 匿名
- 実装容易
- 個人分析不可

推奨：
MVPでは学生ID入力方式。

---

# 8. 権限設計

## 教師側
- スプレッドシート編集権限保持

## 生徒側
- フォームのみアクセス可能
- スプレッドシート非公開

---

# 9. パフォーマンス懸念

## 懸念事項

- 集計処理の重複実行
- 大規模データでのgetDataRange負荷

## 対策

- 必要範囲のみ読み込み
- 集計専用シートにキャッシュ
- バッチ再計算方式検討

---

# 10. 将来拡張との整合性

IRT導入に備え：

- AttemptAnswersを正規化保存
- questionIdを固定管理
- 問題更新時は複製方式採用

---

# 11. 技術的結論

本プロジェクトは、

Google Apps Script + Google Form + Spreadsheet

の構成により
MVPレベルの機能は十分実現可能である。

ただし、

- データ設計
- ID設計
- 採点ロジックの責務分離

を明確にしない場合、
後工程で破綻する可能性がある。

---

Author: Takeomi Tamura
Date: 2026/2/23
Version: 0.1