# Acceptance Criteria
## 一問一答フォーム作成・分析ツール（Phase1）

---

# 1. 本書の目的

本書は、MVPの受入基準（Acceptance Criteria）を定義する。

本書に定義された基準を満たした場合、
MVPは「完了」と判断される。

本基準は test-scenarios.md と整合する。

---

# 2. 全体完了条件（Definition of Done）

以下をすべて満たすこと：

1. 教師が10問の小テストを5分以内に作成・配布できる
2. 生徒が回答送信後、採点結果が保存される
3. 設問別正答率が確認できる
4. Attempt単位での個人成績一覧が取得できる
5. 30名 × 10問規模で正常動作する
6. エラー発生時にログが記録され、教師へ通知される

---

# 3. 機能別受入基準

---

## AC-01 問題登録

### 条件

- 必須項目（問題文・選択肢・正解）未入力の場合、登録されない
- questionIdが一意である
- 登録後、Questionsシートに1行追加される

### 合格基準

- 同一内容で複数登録してもIDが重複しない
- 登録後にデータが即時確認可能

---

## AC-02 クイズ作成

### 条件

- Questionが1件以上選択される
- quizIdが一意である
- QuizQuestionsに正しく紐付け保存される

### 合格基準

- 指定順序で保存される
- 問題0件では作成不可

---

## AC-03 フォーム生成

### 条件

- Googleフォームが自動生成される
- 各設問が正しく反映される
- 回答先スプレッドシートが紐付けられる
- フォームURLが取得可能

### 合格基準

- フォームを開くと設問が表示される
- 回答送信が可能

---

## AC-04 回答受付

### 条件

- Googleアカウントで回答できる
- 複数回回答が可能
- 送信後にフォーム側で保存される

### 合格基準

- 同一アカウントで複数回送信できる
- 回答データがシートに追加される

---

## AC-05 自動採点

### 条件

- 送信後、正誤判定が行われる
- attemptIdが生成される
- AttemptおよびAttemptAnswersに保存される
- 合計得点が計算される

### 合格基準

- 正解数と得点が一致する
- 1問1点で計算される
- 再受験時もすべて保存される

---

## AC-06 集計

### 条件

- 設問別正答率が算出される
- Attempt単位平均点が算出される
- 個人別得点一覧が取得できる

### 合格基準

- 正答率 = 正答数 / 回答数
- 未回答は分母に含まれない
- 集計結果がシートに表示される

---

# 4. 非機能受入基準

---

## AC-NF-01 性能

- 30名 × 10問の回答において
  - 採点処理が10秒以内に完了する
  - 集計表示が即時または30秒以内に反映される

---

## AC-NF-02 セキュリティ

- 生徒はスプレッドシートへ直接アクセスできない
- 教師のみ編集可能
- Googleアカウント制限が有効

---

## AC-NF-03 ログ・通知

- トリガー失敗時にログが残る
- 教師へ通知される（メール等）

---

# 5. データ整合性受入基準

- questionId / quizId / attemptId は一意である
- AttemptAnswersは必ずAttemptと紐付く
- 存在しないQuestionを参照しない

---

# 6. 将来拡張に対する受入基準

MVP段階で以下を保証する：

- AttemptAnswersが正規化保存されている
- questionIdが固定管理されている
- 再受験履歴が保持されている

---

Author: Takeomi Tamura
Date: 2026/2/23
Version: 0.1